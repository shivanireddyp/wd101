<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Registration Form</title>
</head>
<body>
  <h1>Registration Form</h1>
  <form id="registrationForm">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required><br><br>
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required><br><br>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password" required><br><br>
    <label for="dob">Date of Birth:</label>
    <input type="date" id="dob" name="dob" required><br><br>
    
    <label for="acceptTerms">Accept Terms and Conditions:</label>
    <input type="checkbox" id="acceptTerms" name="acceptTerms" required><br><br>
    <button type="submit">Register</button>
  </form>

  <h2>Registered Individuals</h2>
  <ul id="registeredList"></ul>

  <script>
    const registrationForm = document.getElementById("registrationForm");
    const registeredList = document.getElementById("registeredList");

    // Load saved data from local storage on page load
    window.addEventListener("load", () => {
      loadRegisteredData();
    });

    // Handle form submission
    registrationForm.addEventListener("submit", function(event) {
      event.preventDefault();

      const name = registrationForm.name.value;
      const email = registrationForm.email.value;
      const password = registrationForm.password.value;
      const dob = registrationForm.dob.value;
      const acceptTerms = registrationForm.acceptTerms.checked;
      const age = calculateAge(new Date(dob));
      if (age >= 18 && age <= 55 && acceptTerms) {
        // Save data to local storage
        saveData({ name, email, password, dob, age });

        // Clear form fields
        registrationForm.reset();

        // Reload registered data
        loadRegisteredData();
      } else {
        if (age < 18) {
          alert("Age should be 18 or later.");
        } else if (age > 55) {
          alert("Age should be 55 or earlier.");
        } else {
          alert("Please check the acceptance of terms and conditions.");
        }
      }
    });
    function calculateAge(birthday) {
      const today = new Date();
      const birthDate = new Date(birthday);
      let age = today.getFullYear() - birthDate.getFullYear();
      const monthDifference = today.getMonth() - birthDate.getMonth();
      if (monthDifference < 0 || (monthDifference === 0 && today.getDate() < birthDate.getDate())) {
        age--;
      }
      return age;
    }
    // Save data to local storage
    function saveData(data) {
      const registeredData = JSON.parse(localStorage.getItem("registeredData")) || [];
      registeredData.push(data);
      localStorage.setItem("registeredData", JSON.stringify(registeredData));
    }

    // Load registered data from local storage
    function loadRegisteredData() {
      registeredList.innerHTML = "";
      const registeredData = JSON.parse(localStorage.getItem("registeredData")) || [];

      registeredData.forEach(item => {
        const listItem = document.createElement("li");
        listItem.textContent = `Name: ${item.name}, Email: ${item.email}, Age: ${item.age}`;
        registeredList.appendChild(listItem);
      });
    }
  </script>
</body>
</html>
